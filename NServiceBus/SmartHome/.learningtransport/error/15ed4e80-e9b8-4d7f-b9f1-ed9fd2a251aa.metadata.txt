{
  "NServiceBus.MessageId": "a2238a17-510e-40e9-b7d5-b09300975efe",
  "NServiceBus.MessageIntent": "Send",
  "NServiceBus.RelatedTo": "90a8e1ff-28e9-460a-9bfa-b09300975cc3",
  "NServiceBus.ConversationId": "a83bb690-d3ac-42c3-a004-b09300975cc7",
  "NServiceBus.CorrelationId": "90a8e1ff-28e9-460a-9bfa-b09300975cc3",
  "NServiceBus.ReplyToAddress": "SmartHome.CoffeeMachine.Endpoint",
  "NServiceBus.OriginatingMachine": "MDMOB40582",
  "NServiceBus.OriginatingEndpoint": "SmartHome.CoffeeMachine.Endpoint",
  "$.diagnostics.originating.hostid": "38d44b62c892325c63fcd2dd09978056",
  "NServiceBus.ContentType": "application\/json",
  "NServiceBus.EnclosedMessageTypes": "SmartHome.Common.Messages.MakeCoffee, SmartHome.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null",
  "NServiceBus.Version": "8.1.1",
  "NServiceBus.TimeSent": "2023-10-06 09:11:07:541993 Z",
  "NServiceBus.ProcessingMachine": "MDMOB40582",
  "NServiceBus.Retries.Timestamp": "2023-10-06 09:15:43:130603 Z",
  "NServiceBus.DeliverAt": "2023-10-06 09:11:44:230519 Z",
  "NServiceBus.ProcessingEndpoint": "SmartHome.CoffeeMachine.Endpoint",
  "$.diagnostics.hostid": "38d44b62c892325c63fcd2dd09978056",
  "$.diagnostics.hostdisplayname": "MDMOB40582",
  "NServiceBus.FailedQ": "SmartHome.CoffeeMachine.Endpoint",
  "NServiceBus.ExceptionInfo.ExceptionType": "System.InvalidOperationException",
  "NServiceBus.ExceptionInfo.HelpLink": null,
  "NServiceBus.ExceptionInfo.Message": "The instance of entity type 'Coffee' cannot be tracked because another instance with the same key value for {'CoffeeId'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.",
  "NServiceBus.ExceptionInfo.Source": "Microsoft.EntityFrameworkCore",
  "NServiceBus.ExceptionInfo.StackTrace": "System.InvalidOperationException: The instance of entity type 'Coffee' cannot be tracked because another instance with the same key value for {'CoffeeId'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraphAsync(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)\r\n   at SmartHome.CoffeeMachine.Endpoint.MakeCoffeeHandler.Handle(MakeCoffee message, IMessageHandlerContext context) in C:\\Users\\nicolae.topala\\Repos\\Playground\\NServiceBus\\SmartHome\\SmartHome.CoffeeMachine.Endpoint\\MakeCoffeeHandler.cs:line 23\r\n   at NServiceBus.InvokeHandlerTerminator.Terminate(IInvokeHandlerContext context) in \/_\/src\/NServiceBus.Core\/Pipeline\/Incoming\/InvokeHandlerTerminator.cs:line 33\r\n   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in \/_\/src\/NServiceBus.Core\/Pipeline\/Incoming\/LoadHandlersConnector.cs:line 40\r\n   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in \/_\/src\/NServiceBus.Core\/Pipeline\/Incoming\/DeserializeMessageConnector.cs:line 32\r\n   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in \/_\/src\/NServiceBus.Core\/Performance\/Statistics\/ProcessingStatisticsBehavior.cs:line 25\r\n   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in \/_\/src\/NServiceBus.Core\/Pipeline\/Incoming\/TransportReceiveToPhysicalMessageConnector.cs:line 35\r\n   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in \/_\/src\/NServiceBus.Core\/ServicePlatform\/Retries\/RetryAcknowledgementBehavior.cs:line 25\r\n   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in \/_\/src\/NServiceBus.Core\/Pipeline\/MainPipelineExecutor.cs:line 49\r\n   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in \/_\/src\/NServiceBus.Core\/Pipeline\/MainPipelineExecutor.cs:line 68\r\n   at NServiceBus.LearningTransportMessagePump.ProcessFile(ILearningTransportTransaction transaction, String messageId, CancellationToken messageProcessingCancellationToken) in \/_\/src\/NServiceBus.Core\/Transports\/Learning\/LearningTransportMessagePump.cs:line 340",
  "NServiceBus.TimeOfFailure": "2023-10-06 09:19:13:786862 Z",
  "NServiceBus.ExceptionInfo.Data.Message type": "SmartHome.Common.Messages.MakeCoffee",
  "NServiceBus.ExceptionInfo.Data.Handler type": "SmartHome.CoffeeMachine.Endpoint.MakeCoffeeHandler",
  "NServiceBus.ExceptionInfo.Data.Handler start time": "2023-10-06 09:19:13:620214 Z",
  "NServiceBus.ExceptionInfo.Data.Handler failure time": "2023-10-06 09:19:13:783685 Z",
  "NServiceBus.ExceptionInfo.Data.Handler canceled": "False",
  "NServiceBus.ExceptionInfo.Data.Message ID": "a2238a17-510e-40e9-b7d5-b09300975efe",
  "NServiceBus.ExceptionInfo.Data.Transport message ID": "90e88dd7-39fa-4172-a36d-7463c3c1daea",
  "NServiceBus.ExceptionInfo.Data.Pipeline canceled": "False"
}